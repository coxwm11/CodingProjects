package secretWriting;

import java.util.Scanner;
import java.lang.Throwable;
import java.io.*;

public class SecretWriting {
	
	
	

	public static void main(String[] args) throws IOException {

		// Introduction
		System.out.print("Welcome to the Encoder/ Decoder Program \n");
		System.out.print("-----------------------------------------\n");

		System.out.print("Enter E to encode a message. \n");
		System.out.print("Enter D to decode a message. \n");
		System.out.print("Enter Q to quit the program. \n");
		System.out.print("Enter your choice: \n");

		// User input
		Scanner scan = new Scanner(System.in);
		String input = scan.nextLine();

		// File Name from User Inputs

		if (input.charAt(0) == 'E' || input.charAt(0) == 'e') {
			
			// Create input and output file streams
			BufferedReader in = null;
			FileWriter outputStream = null;

			try 
			{
				System.out.print("Enter the name of the file that contains the code:");
				input = scan.nextLine();

				in = new BufferedReader(new FileReader(input));
				String keyEncoded = in.readLine();
				
				String alphabetIndex = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
				
					
				/*System.out.print("Enter the name of the output file:");
				input = scan.nextLine();
				*/

				System.out.print("Enter the message you want to encode.");
				input = scan.nextLine();
				String output ="";
				
				
				for(int i=0; i < input.length(); i++)
				{	
					char codeCharacter;
					char inputCharacter = input.charAt(i);
					int inputIndex = alphabetIndex.indexOf(inputCharacter);
					try {
						
					
					 codeCharacter = keyEncoded.charAt(inputIndex);
					
					}
					catch(StringIndexOutOfBoundsException e) 
					{
						
					 codeCharacter = inputCharacter;
						
					}
				
					output += codeCharacter;
					
					
				}
				

				System.out.print("Encoded Message: " + output);
				
				

			} 
			
			
			catch (IOException noFile)
			{
				System.out.println("File was not found or could not be opened.");
			}
			

			finally {

				if (in != null)
				{
					in.close();
				}

			}

			
		}

	}

}
